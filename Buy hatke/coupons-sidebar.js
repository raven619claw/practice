
webId = 12;
sidebar_html_start = '<span class="svg-declarations">\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="codeUp" x="0px" y="0px" viewBox="0 0 60 60" xml:space="preserve" dislay="none">\n<g>\n<circle cx="30" class="tu-circle" cy="30" r="27.7" style="fill:#FFF;stroke-width:2.5937;stroke:#39B54A"/>\n<g>\n<g>\n<path class="tu-hand" d="M40.7 22.8V12.4h-3.5c0 0 0.7 12.4-10.6 12.4v12.3h3.9v2.4h16V22.8H40.7z" fill="#39B54A"/>\n<path class="tu-hand" d="M13.6 38.7l0.7 0.4v3.6l8.2 0v-3.5l0.9-0.4V23.3l-9.8 0V38.7zM18.3 37.7c1 0 1.8 0.8 1.8 1.8 0 1-0.8 1.8-1.8 1.8s-1.8-0.8-1.8-1.8C16.5 38.5 17.3 37.7 18.3 37.7z" fill="#39B54A"/>\n</g>\n</g>\n</g>\n</svg>\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="codeUp-active" x="0px" y="0px" viewBox="0 0 60 60" xml:space="preserve" dislay="none">\n<g>\n<circle cx="30" class="tu-circle" cy="30" r="27.7" style="fill:#39B54A;stroke-width:2.5937;stroke:#39B54A"/>\n<g>\n<g>\n<path class="tu-hand" d="M40.7 22.8V12.4h-3.5c0 0 0.7 12.4-10.6 12.4v12.3h3.9v2.4h16V22.8H40.7z" fill="#fff"/>\n<path class="tu-hand" d="M13.6 38.7l0.7 0.4v3.6l8.2 0v-3.5l0.9-0.4V23.3l-9.8 0V38.7zM18.3 37.7c1 0 1.8 0.8 1.8 1.8 0 1-0.8 1.8-1.8 1.8s-1.8-0.8-1.8-1.8C16.5 38.5 17.3 37.7 18.3 37.7z" fill="#fff"/>\n</g>\n</g>\n</g>\n</svg>\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="codeDown" x="0px" y="0px" viewBox="0 0 60 60" xml:space="preserve">\n<g>\n<circle cx="30" class="td-circle" cy="30" r="27.6" style="fill:none;stroke-width:2.5884;stroke:#E85325"/>\n<g>\n<g>\n<path class="td-hand" d="M29.5 21.9h-16v16.7h5.7V49h3.5c0 0-0.7-12.5 10.6-12.5V24.2h-3.9V21.9z" fill="#E85325"/>\n<path class="td-hand" d="M36.7 22.5v15.6l0.9 0.4V42l8.2 0v-3.6l0.7-0.4V22.5L36.7 22.5zM41.7 40.4c-1 0-1.7-0.8-1.7-1.8 0-1 0.8-1.8 1.7-1.8 1 0 1.8 0.8 1.8 1.8C43.5 39.7 42.7 40.4 41.7 40.4z" fill="#E85325"/>\n</g>\n</g>\n</g>\n</svg>\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="codeDown-active" x="0px" y="0px" viewBox="0 0 60 60" xml:space="preserve">\n<g>\n<circle cx="30" class="td-circle" cy="30" r="27.6" style="fill:#E85325;stroke-width:2.5884;stroke:#E85325"/>\n<g>\n<g>\n<path class="td-hand" d="M29.5 21.9h-16v16.7h5.7V49h3.5c0 0-0.7-12.5 10.6-12.5V24.2h-3.9V21.9z" fill="#fff"/>\n<path class="td-hand" d="M36.7 22.5v15.6l0.9 0.4V42l8.2 0v-3.6l0.7-0.4V22.5L36.7 22.5zM41.7 40.4c-1 0-1.7-0.8-1.7-1.8 0-1 0.8-1.8 1.7-1.8 1 0 1.8 0.8 1.8 1.8C43.5 39.7 42.7 40.4 41.7 40.4z" fill="#fff"/>\n</g>\n</g>\n</g>\n</svg>\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="comUp" x="0px" y="0px" viewBox="0 0 60 60" xml:space="preserve" dislay="none">\n<g>\n<path class="tu-hand" d="M40.7 22.8V12.4h-3.5c0 0 0.7 12.4-10.6 12.4v12.3h3.9v2.4h16V22.8H40.7z" fill="#ccc"/>\n<path class="tu-hand" d="M13.6 38.7l0.7 0.4v3.6l8.2 0v-3.5l0.9-0.4V23.3l-9.8 0V38.7zM18.3 37.7c1 0 1.8 0.8 1.8 1.8 0 1-0.8 1.8-1.8 1.8s-1.8-0.8-1.8-1.8C16.5 38.5 17.3 37.7 18.3 37.7z" fill="#ccc"/>\n</g>\n</svg>\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="comUp-active" x="0px" y="0px" viewBox="0 0 60 60" xml:space="preserve" dislay="none">\n<g>\n<path class="tu-hand" d="M40.7 22.8V12.4h-3.5c0 0 0.7 12.4-10.6 12.4v12.3h3.9v2.4h16V22.8H40.7z" fill="#39B54A"/>\n<path class="tu-hand" d="M13.6 38.7l0.7 0.4v3.6l8.2 0v-3.5l0.9-0.4V23.3l-9.8 0V38.7zM18.3 37.7c1 0 1.8 0.8 1.8 1.8 0 1-0.8 1.8-1.8 1.8s-1.8-0.8-1.8-1.8C16.5 38.5 17.3 37.7 18.3 37.7z" fill="#39B54A"/>\n</g>\n</svg>\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="comDown" x="0px" y="0px" viewBox="0 0 60 60" xml:space="preserve">\n<g>\n<path class="td-hand" d="M29.5 21.9h-16v16.7h5.7V49h3.5c0 0-0.7-12.5 10.6-12.5V24.2h-3.9V21.9z" fill="#ccc"/>\n<path class="td-hand" d="M36.7 22.5v15.6l0.9 0.4V42l8.2 0v-3.6l0.7-0.4V22.5L36.7 22.5zM41.7 40.4c-1 0-1.7-0.8-1.7-1.8 0-1 0.8-1.8 1.7-1.8 1 0 1.8 0.8 1.8 1.8C43.5 39.7 42.7 40.4 41.7 40.4z" fill="#ccc"/>\n</g>\n</svg>\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="comDown-active" x="0px" y="0px" viewBox="0 0 60 60" xml:space="preserve">\n<g>\n<path class="td-hand" d="M29.5 21.9h-16v16.7h5.7V49h3.5c0 0-0.7-12.5 10.6-12.5V24.2h-3.9V21.9z" fill="#E85325"/>\n<path class="td-hand" d="M36.7 22.5v15.6l0.9 0.4V42l8.2 0v-3.6l0.7-0.4V22.5L36.7 22.5zM41.7 40.4c-1 0-1.7-0.8-1.7-1.8 0-1 0.8-1.8 1.7-1.8 1 0 1.8 0.8 1.8 1.8C43.5 39.7 42.7 40.4 41.7 40.4z" fill="#E85325"/>\n</g>\n</svg>\n<svg xmlns="http://www.w3.org/2000/svg" version="1.1" x="0" y="0" id="cpnExp" viewBox="0 0 60 60" xml:space="preserve">\n<path class="ce-circle" d="M30.2 58.7C14.3 58.7 1.5 45.8 1.5 30c0-15.8 12.9-28.7 28.7-28.7S58.8 14.2 58.8 30C58.8 45.8 46 58.7 30.2 58.7z" fill="#fff" stroke="#A67C52" stroke-width="2.5884"/>\n<rect class="ce-faceelems"x="14.5" y="22.2" transform="matrix(0.7351 0.678 -0.678 0.7351 21.2742 -7.4509)" width="11.3" height="2.7" fill="#A67C52"/>\n<rect class="ce-faceelems"x="18.8" y="17.9" transform="matrix(0.7354 0.6776 -0.6776 0.7354 21.2595 -7.4514)" width="2.7" height="11.3" fill="#A67C52"/>\n<rect class="ce-faceelems"x="33.7" y="21.4" transform="matrix(0.7351 0.6779 -0.6779 0.7351 25.8104 -20.6155)" width="11.3" height="2.7" fill="#A67C52"/>\n<rect class="ce-faceelems"x="37.9" y="17.1" transform="matrix(0.735 0.678 -0.678 0.735 25.817 -20.6174)" width="2.7" height="11.3" fill="#A67C52"/>\n<path class="ce-faceelems"d="M33.7 36.9c-1.4 0.3-1.3 2.4-1.3 4.4 0.1 2.8 1.4 4.1 4.2 3.9 2.8-0.1 4-2.3 3.9-5.1 0-0.2-0.1-0.4-0.3-0.6" fill="#A67C52"/>\n<path class="ce-faceelems"d="M36.7 46.6c-3.5 0.1-5.5-1.7-5.6-5.2 -0.1-2.2-0.2-5.2 2.3-5.7l0.6 2.6 -0.3-1.3 0.3 1.3c-0.3 0.3-0.2 2.1-0.2 3 0.1 2.1 0.8 2.7 2.8 2.7 2.2-0.1 2.6-2.1 2.6-3.7l2.1-1.5c0.4 0.4 0.6 0.9 0.6 1.4C42 44 40 46.5 36.7 46.6z" fill="#A67C52"/>\n<path class="ce-faceelems"d="M35.3 38.7c-0.6-0.2-1.2-0.3-1.8-0.4l0.4-2.7c0.7 0.1 1.4 0.3 2.2 0.5L35.3 38.7z" fill="#A67C52"/>\n<path class="ce-faceelems"d="M38.5 40c-1-0.6-2.1-1-3.2-1.3l0.7-2.6c1.3 0.4 2.6 0.9 3.8 1.6L38.5 40z" fill="#A67C52"/>\n<path class="ce-faceelems"d="M41.1 41.9c-0.5-0.5-1.1-0.9-1.6-1.3l1.5-2.2c0.7 0.5 1.3 1 1.9 1.5L41.1 41.9z" fill="#A67C52"/>\n<path class="ce-faceelems"d="M20.9 42.7l-2-1.8c3.8-4.1 9.4-6.1 14.9-5.3l-0.4 2.7C28.8 37.6 24.1 39.3 20.9 42.7z" fill="#A67C52"/>\n<path class="ce-faceelems"d="M39.5 40.6c-0.3-0.2-0.7-0.4-1-0.6l1.3-2.3c0.4 0.2 0.8 0.5 1.2 0.8L39.5 40.6z" fill="#A67C52"/>\n<path class="ce-faceelems"d="M38.6 40.1c-0.3-0.1-0.6-0.2-0.9-0.3 -0.8-0.3-1.8-0.6-2.7-1.2l1.3-2.3c0.8 0.4 1.6 0.7 2.3 1 0.4 0.1 0.7 0.3 1 0.4L38.6 40.1z" fill="#A67C52"/>\n</svg>\n<svg xmlns="http://www.w3.org/2000/svg" version="1.1" x="0" y="0" id="cpnExp-active" viewBox="0 0 60 60" xml:space="preserve">\n<path class="ce-circle" d="M30.2 58.7C14.3 58.7 1.5 45.8 1.5 30c0-15.8 12.9-28.7 28.7-28.7S58.8 14.2 58.8 30C58.8 45.8 46 58.7 30.2 58.7z" fill="#D9E021" stroke="#A67C52" stroke-width="2.5884"/>\n<rect class="ce-faceelems"x="14.5" y="22.2" transform="matrix(0.7351 0.678 -0.678 0.7351 21.2742 -7.4509)" width="11.3" height="2.7" fill="#A67C52"/>\n<rect class="ce-faceelems"x="18.8" y="17.9" transform="matrix(0.7354 0.6776 -0.6776 0.7354 21.2595 -7.4514)" width="2.7" height="11.3" fill="#A67C52"/>\n<rect class="ce-faceelems"x="33.7" y="21.4" transform="matrix(0.7351 0.6779 -0.6779 0.7351 25.8104 -20.6155)" width="11.3" height="2.7" fill="#A67C52"/>\n<rect class="ce-faceelems"x="37.9" y="17.1" transform="matrix(0.735 0.678 -0.678 0.735 25.817 -20.6174)" width="2.7" height="11.3" fill="#A67C52"/>\n<path class="ce-faceelems"d="M33.7 36.9c-1.4 0.3-1.3 2.4-1.3 4.4 0.1 2.8 1.4 4.1 4.2 3.9 2.8-0.1 4-2.3 3.9-5.1 0-0.2-0.1-0.4-0.3-0.6" fill="#A67C52"/>\n<path class="ce-faceelems"d="M36.7 46.6c-3.5 0.1-5.5-1.7-5.6-5.2 -0.1-2.2-0.2-5.2 2.3-5.7l0.6 2.6 -0.3-1.3 0.3 1.3c-0.3 0.3-0.2 2.1-0.2 3 0.1 2.1 0.8 2.7 2.8 2.7 2.2-0.1 2.6-2.1 2.6-3.7l2.1-1.5c0.4 0.4 0.6 0.9 0.6 1.4C42 44 40 46.5 36.7 46.6z" fill="#A67C52"/>\n<path class="ce-faceelems"d="M35.3 38.7c-0.6-0.2-1.2-0.3-1.8-0.4l0.4-2.7c0.7 0.1 1.4 0.3 2.2 0.5L35.3 38.7z" fill="#A67C52"/>\n<path class="ce-faceelems"d="M38.5 40c-1-0.6-2.1-1-3.2-1.3l0.7-2.6c1.3 0.4 2.6 0.9 3.8 1.6L38.5 40z" fill="#A67C52"/>\n<path class="ce-faceelems"d="M41.1 41.9c-0.5-0.5-1.1-0.9-1.6-1.3l1.5-2.2c0.7 0.5 1.3 1 1.9 1.5L41.1 41.9z" fill="#A67C52"/>\n<path class="ce-faceelems"d="M20.9 42.7l-2-1.8c3.8-4.1 9.4-6.1 14.9-5.3l-0.4 2.7C28.8 37.6 24.1 39.3 20.9 42.7z" fill="#A67C52"/>\n<path class="ce-faceelems"d="M39.5 40.6c-0.3-0.2-0.7-0.4-1-0.6l1.3-2.3c0.4 0.2 0.8 0.5 1.2 0.8L39.5 40.6z" fill="#A67C52"/>\n<path class="ce-faceelems"d="M38.6 40.1c-0.3-0.1-0.6-0.2-0.9-0.3 -0.8-0.3-1.8-0.6-2.7-1.2l1.3-2.3c0.8 0.4 1.6 0.7 2.3 1 0.4 0.1 0.7 0.3 1 0.4L38.6 40.1z" fill="#A67C52"/>\n</svg>\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="usr-l" x="0px" y="0px" viewBox="0 0 60 58.7" xml:space="preserve">\n<g>\n<g>\n<defs>\n<circle id="SVGID_1_" cx="29.8" cy="29.4" r="28.4"/>\n</defs>\n<clipPath id="SVGID_2_">\n<use xlink:href="#SVGID_1_"/>\n</clipPath>\n</g>\n<g>\n<defs>\n<circle id="SVGID_3_" cx="29.8" cy="29.4" r="28.4"/>\n</defs>\n<clipPath id="SVGID_4_">\n<use xlink:href="#SVGID_3_"/>\n</clipPath>\n<circle cx="29.8" cy="29.4" r="28.4" style="clip-path:url(#SVGID_4_);fill:#FAFAFA"/>\n<g clip-path="url(#SVGID_4_)">\n<polygon class="ci-color" points="34 37 25.6 37 26.1 43 33.5 43 " fill="#E85325"/>\n<g>\n<g>\n<path class="ci-color" d="M40.2 24.9c0 6.9-4.7 13.8-10.4 13.8 -5.7 0-10.4-7-10.4-13.8s4.7-10.5 10.4-10.5C35.6 14.4 40.2 18.1 40.2 24.9z" fill="#E85325"/>\n</g>\n</g>\n<g>\n<g>\n<path class="ci-color" d="M45.5 44.1c-5.5-4.1-25.8-4-31.3 0.1 -3.8 2.8 0 15.8 0 15.8h31.3C45.5 60 49.2 46.9 45.5 44.1z" fill="#E85325"/>\n</g>\n</g>\n</g>\n<circle cx="29.8" cy="29.4" r="28.4" style="clip-path:url(#SVGID_4_);fill:none;stroke-width:1.7449;stroke:#F2F2F2"/>\n</g>\n<g>\n<defs>\n<circle id="SVGID_5_" cx="29.8" cy="29.4" r="28.4"/>\n</defs>\n<clipPath id="SVGID_6_">\n<use xlink:href="#SVGID_5_"/>\n</clipPath>\n</g>\n</g>\n</svg>\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="usr-r" x="0px" y="0px" viewBox="0 0 60 58.7" xml:space="preserve">\n<g>\n<g>\n<defs>\n<circle id="SVGID_1_" cx="29.8" cy="29.4" r="28.4"/>\n</defs>\n<clipPath id="SVGID_2_">\n<use xlink:href="#SVGID_1_"/>\n</clipPath>\n</g>\n<g>\n<defs>\n<circle id="SVGID_3_" cx="29.8" cy="29.4" r="28.4"/>\n</defs>\n<clipPath id="SVGID_4_">\n<use xlink:href="#SVGID_3_"/>\n</clipPath>\n<circle cx="29.8" cy="29.4" r="28.4" style="clip-path:url(#SVGID_4_);fill:#FAFAFA"/>\n<g clip-path="url(#SVGID_4_)">\n<polygon class="ci-color" points="34 37 25.6 37 26.1 43 33.5 43 " fill="#8EC641"/>\n<g>\n<g>\n<path class="ci-color" d="M40.2 24.9c0 6.9-4.7 13.8-10.4 13.8 -5.7 0-10.4-7-10.4-13.8s4.7-10.5 10.4-10.5C35.6 14.4 40.2 18.1 40.2 24.9z" fill="#8EC641"/>\n</g>\n</g>\n<g>\n<g>\n<path class="ci-color" d="M45.5 44.1c-5.5-4.1-25.8-4-31.3 0.1 -3.8 2.8 0 15.8 0 15.8h31.3C45.5 60 49.2 46.9 45.5 44.1z" fill="#8EC641"/>\n</g>\n</g>\n</g>\n<circle cx="29.8" cy="29.4" r="28.4" style="clip-path:url(#SVGID_4_);fill:none;stroke-width:1.7449;stroke:#F2F2F2"/>\n</g>\n<g>\n<defs>\n<circle id="SVGID_5_" cx="29.8" cy="29.4" r="28.4"/>\n</defs>\n<clipPath id="SVGID_6_">\n<use xlink:href="#SVGID_5_"/>\n</clipPath>\n</g>\n</g>\n</svg>\n</span>\n<div class="hatke-coupons_list-main">\n<div id="hatke-cl-button">\n<img class="hcl-b-front">\n</div>\n<div class="hc-sidebar">\n<div class="hc-sidebar-wrap">\n<a href="#" class="hc-close" onclick="sidebar.hide();">x</a>\n<header>\n<div class="hc-sb-title">Hatke Coupons</div>';
sidebar_html_end = '</ul></div></div><footer><input type="text" name="" id="" placeholder="Found Missing Coupons?"class="hc-code-txt"><button style="color: #FFF; !important" class="hc-code-sub">ADD THEM HERE</button></footer></div></div></div>';

request = {
	get : {
		code : '/buyH1/getCode.php?',
		comments : '/buyH1/getComm.php?'
	},
	sub : {
		code : '/buyH1/subCode.php?',
		comments : '/buyH1/subComm.php?',
	},
	like : {
		code : '/buyH1/likeCode.php?',
		comments : '/buyH1/likeComm.php?',
	}
}

sidebar = {
	init: function(){
		sidebar.getCode(webId);
	},

	show: function(){
		$('.hatke-coupons_list-main').addClass('hatke-coupons-sidebar-open');
	},

	hide: function(){
		$('.hatke-coupons_list-main').removeClass('hatke-coupons-sidebar-open');
	},

	alert: function(msg){
		alert(msg);
	},

	getCode: function(wid){
		jQuery.ajax({
			url: request.get.code,
			type: 'GET',
			data: 'webID='+wid
		}).done(function(msg){
			sidebar.fillCode(msg);
		});
	},

	getComments: function(cid){
		//console.log("I was called wih " + cid);
		jQuery.ajax({
			url: request.get.comments,
			type: 'GET',
			data: 'cID='+cid
		}).done(function(msg){
			sidebar.showComments(msg,cid);
		});
	},

	vote: function(codeId, lflag){
		jQuery.ajax({
			url: request.like.code,
			type: 'POST',
			data: 'cID='+codeId+'&lflag='+lflag
		}).done(function(msg){
			//var report= jQuery.parseJSON(msg);
			//sidebar.alert(report.msg);
			alert(msg);
		});
	},

	fillCode: function(json){
		var sidebar_html = sidebar_html_start;

		if (json == 0){
			sidebar_html += '<div class="hc-sb-notif">No coupons found<div class="hc-sb-clamp" onclick="sidebar.show();"><img src="./images/clamp-icon.png" width="30px"></div></div>';
			sidebar_html += '</header><div class="hc-sb-content"><div class="hc-sb-c-wrap"><ul>';
		}else{
			coupons = jQuery.parseJSON(json);
			sidebar_html += '<div class="hc-sb-notif">'+coupons.length+' coupons found<div class="hc-sb-clamp" onclick="sidebar.show();"><img src="./images/clamp-icon.png" width="30px"></div></div>';
			sidebar_html += '</header><div class="hc-sb-content"><div class="hc-sb-c-wrap"><ul>';
			sidebar_html += sidebar.generator.code_wrapper(coupons);
		}

		sidebar_html += sidebar_html_end;
		jQuery('html body').append(sidebar_html);
	},

	showComments: function(json, codeId){
		var comments_html = '', lastID=0, d='l';

		if (json == 0){
			comments_html += '<hr/>NO COMMENTS TILL NOW:<div class="hc-com-cont">';			
		}else{
			comments = jQuery.parseJSON(json);
			comments_html += '<hr/>COMMENTS:<div class="hc-com-cont">';
			jQuery.each(comments, function(){
				//if(lastID != this.userId)
					d=_toggle(d);
				comments_html += sidebar.generator.comment_item(this,d);
				//lastID = this.userId;
			});
		}

		comments_html += '</div><div class="hc-com-add"><textarea name="hc-com-add-txt" class="hc-com-add-txt"></textarea><button class="hc-com-add-sub" onclick="sidebar.submitComment('+codeId+')"></button></div>'
		jQuery('#code-'+codeId+' .hc-com-wrap').html(comments_html);
		jQuery('.showCom').removeClass('showCom');
		jQuery('#code-'+codeId+' .hc-com').addClass('showCom');
	},

	generator: {

		code_wrapper: function(coupons){
			var coupon_list_html='';
			jQuery.each(coupons, function(){
				coupon_list_html += sidebar.generator.coupon_item(this);
			});
			return coupon_list_html;
		},
		
		coupon_item: function(coupon){
			var coupon_item_html = '';
			coupon_item_html += '<li class="hc-li" id="code-'+coupon.codeId+'"><a href="#"><div class="hc-li-wrap">';
			coupon_item_html += (_isEmpty(coupon.desc)) ? '' : '<div class="hc-detail">'+coupon.desc+'</div>';
			coupon_item_html += '<div class="hc-code"><span>'+coupon.code+'</span></div>';
			coupon_item_html += '<div class="hc-add"><div class="hc-add-det"><div class="det-row"><span>Valid on: </span><span class="det-validOn">';
			
			if(_isEmpty(coupon.validOn))
				coupon_item_html += 'N.A.';
			else
				coupon_item_html +=	coupon.validOn;

			coupon_item_html += '</span></div><div class="det-row"><span>Valid Till: </span><span class="det-validTill">';
			
			if(_isEmpty(coupon.validTill)) 
				coupon_item_html += 'N.A.';
			else
				coupon_item_html +=	coupon.validTill;

			coupon_item_html += '</span></div></div><div class="hc-add-act">'
			
			coupon_item_html += '<button class="act-btn vote-up" onclick="sidebar.vote('+coupon.codeId+',1);"><svg><use class="act-btn-up" xlink:href="#codeUp"></use></svg><span class="vote-counter">'
								+ coupon.upvotes + '</span></button><button class="act-btn vote-down"  onclick="sidebar.vote('+coupon.codeId+',0);"><svg><use class="act-btn-down" xlink:href="#codeDown"></use></svg><span class="vote-counter">'
								+ coupon.downvotes + '</span></button><button class="act-btn markExp"  onclick="sidebar.markExpire('+coupon.codeId+');"><svg><use class="act-btn-exp" xlink:href="#cpnExp"></use></svg></button>'
								+ '</div></div><div class="hc-com"><span class="hc-com-vc" onclick="sidebar.getComments('+coupon.codeId+');">VIEW COMMENTS</span><div class="hc-com-wrap"></div></div></div></a></li>';							
			return coupon_item_html;								
		},

		comment_item: function(comment, direction){
			var comment_html = '';

			comment_html +=	 '<div class="com com-'+direction+'"><div class="com-head"><svg><use xlink:href="#usr-'+direction+'"></use></svg><div class="com-act">'
							+'<button class="com-act-btn vote-up"><svg><use xlink:href="#comUp"></use></svg><span class="vote-counter">'+comment.upvotes+'</span></button>'
							+'<button class="com-act-btn vote-down"><svg><use xlink:href="#comDown"></use></svg><span class="vote-counter">'+comment.downvotes+'</span></button>'
							+'</div></div><div class="com-c"><span class="com-c-id">USER_'+comment.userId+'</span>'+comment.comment+'</div></div>';

			return comment_html;							
		}
	}
}

function _isEmpty(str){
	if((str == '')||(typeof (str) == 'undefined'))
		return true;
	return false;
}

function _toggle(d){
	if(d=='l')
		return 'r';
 	return 'l';
}